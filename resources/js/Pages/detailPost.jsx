import { Inertia } from "@inertiajs/inertia";
import React from "react";
import { useState } from "react";
import { usePage } from "@inertiajs/inertia-react";
import { Link } from "@inertiajs/inertia-react";
import moment from "moment";

export default function detailPost({ post, user }) {
    const { flash } = usePage().props;
    console.log(flash.message);
    const [disabled, setdisabled] = useState(false);
    const [id, setid] = useState(post.id);
    const [commentId, setcommentId] = useState();
    const [Body, setBody] = useState("");
    const [reply, setreply] = useState("");
    const [loading, setloading] = useState(false);
    console.log(post);
    const handlelike = (id) => {
        Inertia.post(
            "/posts/" + id + "/like",
            {},
            {
                onProgress: () => setdisabled(true),
                onStart: () => setdisabled(true),
                onFinish: () => setdisabled(false),
                preserveScroll: true,
            }
        );
    };

    const handleunlike = (id) => {
        Inertia.delete("/posts/" + id + "/unlike", {
            onProgress: () => setdisabled(true),
            onStart: () => setdisabled(true),
            onFinish: () => setdisabled(false),
            preserveScroll: true,
        });
    };

    const handlecomment = (e) => {
        e.preventDefault();
        const formData = {
            body: Body,
            post_id: id,
        };
        Inertia.post(`/comment`, formData, {
            preserveScroll: true,
            onProgress: () => setloading(true),
            onStart: () => setloading(true),
            onFinish: () => {
                setloading(false), setBody("");
            },
        });
    };

    const handlereply = (e, commentId) => {
        e.preventDefault();
        const formData = {
            body: reply,
            comment_id: commentId,
        };
        Inertia.post(`/reply`, formData, {
            preserveScroll: true,
        });
        console.log(commentId);
    };
    return (
        <div className="flex px-4 lg:px-10 py-4 border-y border-gray-600 gap-2 relative">
            <img
                src={"/storage/" + post.user.image}
                alt=""
                className="w-12 h-12 object-cover rounded-full"
            />
            <div className="w-full">
                <div className="flex justify-between">
                    <div className="mb-4">
                        <h1 className="font-semibold text-base text-[#DCDEE0]">
                            {post.user.name}
                        </h1>
                        <p className="text-[#E1E3E4]  text-sm">{post.title}</p>
                    </div>
                    <div>
                        <button
                            className="flex items-center justify-center w-10 h-10 rounded-full hover:bg-white hover:bg-opacity-10 cursor-pointer"
                            onClick={() => dropdown(post.id)}
                        >
                            <svg
                                width="18"
                                height="18"
                                viewBox="0 0 68 17"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    fillRule="evenodd"
                                    clipRule="evenodd"
                                    d="M8.94595 16.9279C13.5384 16.9279 17.2613 13.205 17.2613 8.61263C17.2613 4.0202 13.5384 0.29731 8.94595 0.29731C4.35352 0.29731 0.63063 4.0202 0.63063 8.61263C0.63063 13.205 4.35352 16.9279 8.94595 16.9279ZM42.2072 8.61263C42.2072 13.205 38.4843 16.9279 33.8919 16.9279C29.2995 16.9279 25.5766 13.205 25.5766 8.61263C25.5766 4.0202 29.2995 0.29731 33.8919 0.29731C38.4843 0.29731 42.2072 4.0202 42.2072 8.61263ZM67.1532 8.61263C67.1532 13.205 63.4303 16.9279 58.8378 16.9279C54.2454 16.9279 50.5225 13.205 50.5225 8.61263C50.5225 4.0202 54.2454 0.29731 58.8378 0.29731C63.4303 0.29731 67.1532 4.0202 67.1532 8.61263Z"
                                    fill="white"
                                />
                            </svg>
                        </button>
                        <div
                            className="absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md overflow-hidden hidden"
                            id={`dropdown-${post.id}`}
                        >
                            <button
                                href="#"
                                className="flex w-full gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                            >
                                <svg
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M19 2H6.27001C5.5682 2.00023 4.88868 2.24651 4.34969 2.69598C3.81069 3.14544 3.44633 3.76965 3.32001 4.46L2.05001 11.46C1.97088 11.8924 1.98775 12.337 2.09944 12.7622C2.21113 13.1874 2.41491 13.5828 2.69634 13.9206C2.97778 14.2583 3.33 14.53 3.72809 14.7166C4.12617 14.9031 4.56039 14.9999 5.00001 15H9.56001L9.00001 16.43C8.76707 17.0561 8.6895 17.7294 8.77394 18.3921C8.85838 19.0548 9.10232 19.6871 9.48482 20.2348C9.86732 20.7825 10.377 21.2292 10.9701 21.5367C11.5632 21.8441 12.222 22.0031 12.89 22C13.0824 21.9996 13.2705 21.9437 13.4319 21.8391C13.5933 21.7344 13.7211 21.5854 13.8 21.41L16.65 15H19C19.7957 15 20.5587 14.6839 21.1213 14.1213C21.6839 13.5587 22 12.7956 22 12V5C22 4.20435 21.6839 3.44129 21.1213 2.87868C20.5587 2.31607 19.7957 2 19 2ZM15 13.79L12.28 19.91C12.0017 19.8258 11.7436 19.6855 11.5215 19.4978C11.2995 19.31 11.1183 19.0788 10.989 18.8183C10.8597 18.5579 10.7851 18.2737 10.7698 17.9834C10.7545 17.693 10.7988 17.4026 10.9 17.13L11.43 15.7C11.5429 15.3977 11.5811 15.0727 11.5411 14.7525C11.5012 14.4323 11.3844 14.1265 11.2007 13.8613C11.017 13.596 10.7718 13.3791 10.4861 13.2292C10.2004 13.0792 9.88267 13.0006 9.56001 13H5.00001C4.8531 13.0002 4.70794 12.9681 4.57485 12.9059C4.44177 12.8437 4.32403 12.7529 4.23001 12.64C4.13367 12.5287 4.06311 12.3975 4.02335 12.2557C3.98359 12.114 3.97562 11.9652 4.00001 11.82L5.27001 4.82C5.3126 4.58704 5.43649 4.37676 5.61962 4.2266C5.80274 4.07644 6.03322 3.99614 6.27001 4H15V13.79ZM20 12C20 12.2652 19.8947 12.5196 19.7071 12.7071C19.5196 12.8946 19.2652 13 19 13H17V4H19C19.2652 4 19.5196 4.10536 19.7071 4.29289C19.8947 4.48043 20 4.73478 20 5V12Z"
                                        fill="#FF0000"
                                    />
                                </svg>
                                Not Interest
                            </button>
                            <button
                                href="#"
                                className="flex w-full gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                            >
                                <svg
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M19.9912 2.00201C19.8599 2.00194 19.7298 2.02775 19.6084 2.07798C19.4871 2.12821 19.3768 2.20187 19.2839 2.29474C19.1911 2.38761 19.1174 2.49788 19.0672 2.61924C19.017 2.7406 18.9911 2.87067 18.9912 3.00201V3.63873C18.1478 4.68444 17.0819 5.52893 15.871 6.11073C14.66 6.69254 13.3346 6.99702 11.9912 7.00201H5.99121C5.19583 7.00288 4.43327 7.31923 3.87085 7.88165C3.30843 8.44407 2.99208 9.20663 2.99121 10.002V12.002C2.99208 12.7974 3.30843 13.56 3.87085 14.1224C4.43327 14.6848 5.19583 15.0011 5.99121 15.002H6.475L4.07227 20.6084C4.00698 20.7605 3.98047 20.9264 3.99512 21.0912C4.00978 21.256 4.06514 21.4147 4.15624 21.5528C4.24734 21.691 4.37133 21.8043 4.51706 21.8827C4.6628 21.9611 4.82572 22.0021 4.99121 22.002H8.99121C9.18696 22.0021 9.37843 21.9447 9.54182 21.8369C9.7052 21.7291 9.83329 21.5756 9.91016 21.3956L12.6339 15.04C13.8646 15.1304 15.0636 15.472 16.157 16.0439C17.2505 16.6158 18.215 17.4058 18.9912 18.3651V19.002C18.9912 19.2672 19.0966 19.5216 19.2841 19.7091C19.4716 19.8967 19.726 20.002 19.9912 20.002C20.2564 20.002 20.5108 19.8967 20.6983 19.7091C20.8859 19.5216 20.9912 19.2672 20.9912 19.002V3.00201C20.9913 2.87067 20.9655 2.7406 20.9152 2.61924C20.865 2.49788 20.7914 2.38761 20.6985 2.29474C20.6056 2.20186 20.4953 2.12821 20.374 2.07798C20.2526 2.02775 20.1226 2.00194 19.9912 2.00201ZM5.99121 13.002C5.72605 13.0018 5.4718 12.8964 5.2843 12.7089C5.0968 12.5214 4.99139 12.2672 4.99121 12.002V10.002C4.99139 9.73685 5.09681 9.4826 5.2843 9.29511C5.4718 9.10761 5.72605 9.00219 5.99121 9.00201H6.99121V13.002H5.99121ZM8.33203 20.002H6.50781L8.65039 15.002H10.4746L8.33203 20.002ZM18.9912 15.5238C17.0195 13.8994 14.5459 13.0083 11.9912 13.002H8.99121V9.00196H11.9912C14.5459 8.99543 17.0195 8.10412 18.9912 6.47962V15.5238Z"
                                        fill="#FF0000"
                                    />
                                </svg>
                                Report
                            </button>
                        </div>
                    </div>
                </div>
                <img
                    src={"/storage/" + post.body}
                    alt=""
                    className="w-fit rounded-lg overflow-hidden"
                />
                <div className="flex mt-4 mb-1 gap-1 items-center">
                    <div className="cursor-pointer hover:bg-gray-700 rounded-full w-fit p-2 h-fit">
                        {post.like.some((like) => like.user_id === user.id) ? (
                            <button
                                onClick={() => handleunlike(post.id)}
                                disabled={disabled}
                            >
                                <svg
                                    width="25"
                                    height="25"
                                    viewBox="0 0 29 28"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M4.13903 16.0803L14.7761 27.2405C15.1702 27.6539 15.8298 27.6539 16.2239 27.2405L26.861 16.0803C29.713 13.088 29.713 8.23653 26.861 5.24423C24.0089 2.25192 19.3849 2.25192 16.5328 5.24423L16.2239 5.56837C15.8298 5.98178 15.1702 5.98178 14.7761 5.56837L14.4672 5.24423C11.6151 2.25193 6.99107 2.25193 4.13903 5.24423C1.28699 8.23653 1.28699 13.088 4.13903 16.0803Z"
                                        fill="#FF3040"
                                    />
                                </svg>
                            </button>
                        ) : (
                            <button
                                onClick={() => handlelike(post.id)}
                                disabled={disabled}
                            >
                                <svg
                                    width="25"
                                    height="25"
                                    viewBox="0 0 29 27"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M3.13903 14.0803L13.7761 25.2405C14.1702 25.6539 14.8298 25.6539 15.2239 25.2405L25.861 14.0803C28.713 11.088 28.713 6.23653 25.861 3.24423C23.0089 0.251924 18.3849 0.251924 15.5328 3.24423L15.2239 3.56837C14.8298 3.98178 14.1702 3.98178 13.7761 3.56837L13.4672 3.24423C10.6151 0.251925 5.99107 0.251925 3.13903 3.24423C0.28699 6.23653 0.28699 11.088 3.13903 14.0803Z"
                                        stroke="white"
                                        strokeWidth="2"
                                    />
                                </svg>
                            </button>
                        )}
                    </div>
                    <button
                        onClick={() => formfocus()}
                        className="cursor-pointer flex items-center justify-center hover:bg-gray-700 rounded-full w-fit p-2 h-fit"
                    >
                        <svg
                            width="25"
                            height="25"
                            viewBox="0 0 31 31"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <mask
                                id="path-1-outside-1_236_149"
                                maskUnits="userSpaceOnUse"
                                x="1.99414"
                                y="2"
                                width="29"
                                height="29"
                                fill="black"
                            >
                                <rect
                                    fill="white"
                                    x="1.99414"
                                    y="2"
                                    width="29"
                                    height="29"
                                />
                                <path
                                    fill-rule="evenodd"
                                    clip-rule="evenodd"
                                    d="M25.8272 24.8154C27.7971 22.6061 28.9941 19.6929 28.9941 16.5C28.9941 9.59644 23.3977 4 16.4941 4C9.59058 4 3.99414 9.59644 3.99414 16.5C3.99414 23.4036 9.59058 29 16.4941 29C18.8689 29 21.0889 28.3378 22.9797 27.188L26.498 27.9427L25.8272 24.8154Z"
                                />
                            </mask>
                            <path
                                d="M25.8272 24.8154L24.3344 23.4845L23.6588 24.2423L23.8717 25.2349L25.8272 24.8154ZM22.9797 27.188L23.3992 25.2325L22.6208 25.0655L21.9405 25.4791L22.9797 27.188ZM26.498 27.9427L26.0786 29.8982L29.1021 30.5468L28.4536 27.5232L26.498 27.9427ZM26.9941 16.5C26.9941 19.1833 25.9902 21.6273 24.3344 23.4845L27.32 26.1464C29.6039 23.5849 30.9941 20.2024 30.9941 16.5H26.9941ZM16.4941 6C22.2931 6 26.9941 10.701 26.9941 16.5H30.9941C30.9941 8.49187 24.5023 2 16.4941 2V6ZM5.99414 16.5C5.99414 10.701 10.6952 6 16.4941 6V2C8.48601 2 1.99414 8.49187 1.99414 16.5H5.99414ZM16.4941 27C10.6952 27 5.99414 22.299 5.99414 16.5H1.99414C1.99414 24.5081 8.48601 31 16.4941 31V27ZM21.9405 25.4791C20.354 26.4439 18.4921 27 16.4941 27V31C19.2456 31 21.8238 30.2317 24.0189 28.8968L21.9405 25.4791ZM22.5602 29.1435L26.0786 29.8982L26.9175 25.9872L23.3992 25.2325L22.5602 29.1435ZM28.4536 27.5232L27.7827 24.396L23.8717 25.2349L24.5425 28.3622L28.4536 27.5232Z"
                                fill="white"
                                mask="url(#path-1-outside-1_236_149)"
                            />
                        </svg>
                    </button>

                    <div className="cursor-pointer hover:bg-gray-700 rounded-full w-fit p-2 h-fit">
                        <svg
                            width="25"
                            height="27"
                            viewBox="0 0 29 27"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M12.7222 14.3333L15.2281 25.6097C15.3261 26.0508 15.9125 26.1459 16.1449 25.7585L27.5457 6.75725C27.7456 6.42399 27.5056 6 27.1169 6H4.35163C3.88743 6 3.67378 6.57753 4.02623 6.87963L12.7222 14.3333ZM12.7222 14.3333L26.6111 6.69444"
                                stroke="white"
                                stroke-width="2"
                            />
                        </svg>
                    </div>
                </div>
                <Link href={`/${post.user.name}/post/${post.id}`}>
                    <p>{post.comment.length} balasan</p>
                </Link>
                {loading ? (
                    <div className="flex items-center justify-center">
                        <span class="loader"></span>
                    </div>
                ) : (
                    <form
                        onSubmit={handlecomment}
                        class="w-full py-4 border-t border-gray-600 relative flex items-center gap-4"
                    >
                        <img
                            src={`/storage/${user.image}`}
                            alt=""
                            className="w-12 h-12 object-cover rounded-full"
                        />
                        <input type="hidden" name="post_id" value={id} />
                        <input
                            id="comment-input"
                            type="text"
                            autoComplete="off"
                            spellCheck="false"
                            placeholder="add a comment"
                            value={Body}
                            onChange={(e) => setBody(e.target.value)}
                            name="body"
                            class="placeholder-text-white w-full h-full bg-transparent border-b border-white border-opacity-50 focus:border-opacity-100 focus:outline-none"
                        />

                        <button
                            type="submit"
                            className="hover:bg-blue-600 rounded-full p-2 flex items-center justify-center"
                        >
                            <svg
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M20.34 9.32L6.34 2.32C5.78749 2.04501 5.16362 1.94711 4.55344 2.03965C3.94326 2.13219 3.37646 2.41067 2.93033 2.83711C2.48421 3.26356 2.18046 3.81722 2.0605 4.42261C1.94054 5.028 2.0102 5.65565 2.26 6.22L4.66 11.59C4.71446 11.7198 4.74251 11.8592 4.74251 12C4.74251 12.1408 4.71446 12.2802 4.66 12.41L2.26 17.78C2.0567 18.2367 1.97076 18.737 2.00998 19.2354C2.0492 19.7337 2.21235 20.2144 2.48459 20.6337C2.75682 21.053 3.12953 21.3976 3.56883 21.6362C4.00812 21.8748 4.50009 21.9999 5 22C5.46823 21.9953 5.92949 21.886 6.35 21.68L20.35 14.68C20.8466 14.4302 21.264 14.0473 21.5557 13.5741C21.8474 13.1009 22.0018 12.5559 22.0018 12C22.0018 11.4441 21.8474 10.8991 21.5557 10.4259C21.264 9.95269 20.8466 9.56981 20.35 9.32H20.34ZM19.45 12.89L5.45 19.89C5.26617 19.9783 5.05973 20.0082 4.85839 19.9758C4.65705 19.9435 4.47041 19.8503 4.32352 19.7089C4.17662 19.5674 4.07648 19.3844 4.03653 19.1844C3.99658 18.9844 4.01873 18.777 4.1 18.59L6.49 13.22C6.52094 13.1483 6.54766 13.0748 6.57 13H13.46C13.7252 13 13.9796 12.8946 14.1671 12.7071C14.3546 12.5196 14.46 12.2652 14.46 12C14.46 11.7348 14.3546 11.4804 14.1671 11.2929C13.9796 11.1054 13.7252 11 13.46 11H6.57C6.54766 10.9252 6.52094 10.8517 6.49 10.78L4.1 5.41C4.01873 5.22296 3.99658 5.01555 4.03653 4.81557C4.07648 4.61559 4.17662 4.4326 4.32352 4.29115C4.47041 4.14969 4.65705 4.05653 4.85839 4.02415C5.05973 3.99177 5.26617 4.02173 5.45 4.11L19.45 11.11C19.6138 11.1939 19.7513 11.3214 19.8473 11.4784C19.9433 11.6355 19.994 11.816 19.994 12C19.994 12.184 19.9433 12.3645 19.8473 12.5216C19.7513 12.6786 19.6138 12.8061 19.45 12.89Z"
                                    fill="white"
                                />
                            </svg>
                        </button>
                    </form>
                )}
                {post.comment.map((comment, index) => (
                    <div
                        key={index}
                        className="flex gap-4 py-4 comment-container"
                    >
                        <img
                            src={`/storage/${comment.user.image}`}
                            alt=""
                            className="w-12 h-12 object-cover rounded-full"
                        />
                        <div className="w-full">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-2">
                                    <p className="font-bold">
                                        {comment.user.name}
                                    </p>
                                    <p className="text-[#E1E3E4] text-sm">
                                    {moment.utc(comment.created_at).fromNow()}
                                    </p>
                                </div>
                            </div>
                            <p>{comment.body}</p>
                            <button
                                className="text-[#2B7BC4] text-xs"
                                onClick={() => toggleReply(comment.id)}
                            >
                                reply
                            </button>
                            {loading ? (
                                <div className="flex items-center justify-center">
                                    <span class="loader"></span>
                                </div>
                            ) : (
                                <form
                                    onSubmit={(e) => handlereply(e, comment.id)}
                                    class="w-full hidden py-2 relative flex items-center gap-4"
                                    id={`replyComment-${comment.id}`}
                                >
                                    <img
                                        src={`/storage/${user.image}`}
                                        alt=""
                                        className="w-12 h-12 object-cover rounded-full"
                                    />
                                    <input
                                        id={`comment-${comment.id}`}
                                        type="text"
                                        autoComplete="off"
                                        spellCheck="false"
                                        placeholder={`Reply to ${comment.user.name}`}
                                        onChange={(e) =>
                                            setreply(e.target.value)
                                        }
                                        name="body"
                                        class="placeholder-text-white w-full h-full bg-transparent border-b border-white border-opacity-50 focus:border-opacity-100 focus:outline-none"
                                    />

                                    <button
                                        type="submit"
                                        className="hover:bg-blue-600 rounded-full p-2 flex items-center justify-center"
                                    >
                                        <svg
                                            width="24"
                                            height="24"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            xmlns="http://www.w3.org/2000/svg"
                                        >
                                            <path
                                                d="M20.34 9.32L6.34 2.32C5.78749 2.04501 5.16362 1.94711 4.55344 2.03965C3.94326 2.13219 3.37646 2.41067 2.93033 2.83711C2.48421 3.26356 2.18046 3.81722 2.0605 4.42261C1.94054 5.028 2.0102 5.65565 2.26 6.22L4.66 11.59C4.71446 11.7198 4.74251 11.8592 4.74251 12C4.74251 12.1408 4.71446 12.2802 4.66 12.41L2.26 17.78C2.0567 18.2367 1.97076 18.737 2.00998 19.2354C2.0492 19.7337 2.21235 20.2144 2.48459 20.6337C2.75682 21.053 3.12953 21.3976 3.56883 21.6362C4.00812 21.8748 4.50009 21.9999 5 22C5.46823 21.9953 5.92949 21.886 6.35 21.68L20.35 14.68C20.8466 14.4302 21.264 14.0473 21.5557 13.5741C21.8474 13.1009 22.0018 12.5559 22.0018 12C22.0018 11.4441 21.8474 10.8991 21.5557 10.4259C21.264 9.95269 20.8466 9.56981 20.35 9.32H20.34ZM19.45 12.89L5.45 19.89C5.26617 19.9783 5.05973 20.0082 4.85839 19.9758C4.65705 19.9435 4.47041 19.8503 4.32352 19.7089C4.17662 19.5674 4.07648 19.3844 4.03653 19.1844C3.99658 18.9844 4.01873 18.777 4.1 18.59L6.49 13.22C6.52094 13.1483 6.54766 13.0748 6.57 13H13.46C13.7252 13 13.9796 12.8946 14.1671 12.7071C14.3546 12.5196 14.46 12.2652 14.46 12C14.46 11.7348 14.3546 11.4804 14.1671 11.2929C13.9796 11.1054 13.7252 11 13.46 11H6.57C6.54766 10.9252 6.52094 10.8517 6.49 10.78L4.1 5.41C4.01873 5.22296 3.99658 5.01555 4.03653 4.81557C4.07648 4.61559 4.17662 4.4326 4.32352 4.29115C4.47041 4.14969 4.65705 4.05653 4.85839 4.02415C5.05973 3.99177 5.26617 4.02173 5.45 4.11L19.45 11.11C19.6138 11.1939 19.7513 11.3214 19.8473 11.4784C19.9433 11.6355 19.994 11.816 19.994 12C19.994 12.184 19.9433 12.3645 19.8473 12.5216C19.7513 12.6786 19.6138 12.8061 19.45 12.89Z"
                                                fill="white"
                                            />
                                        </svg>
                                    </button>
                                </form>
                            )}
                                {comment.reply.length > 0 && (
                                    <button className="flex items-center bg-slate-300 rounded-lg hover:bg-slate-600">
                                        <svg
                                            xmlns="http://www.w3.org/2000/svg"
                                            width="20"
                                            height="20"
                                            fill="currentColor"
                                            class="bi bi-arrow-down-short"
                                            viewBox="0 0 16 16"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"
                                            />
                                        </svg>
                                        <p>{comment.reply.length} Balasan</p>
                                    </button>
                                )}
                            {comment.reply.map((reply) => (
                                <div
                                    key={reply.id}
                                    className="flex gap-2 w-fit rounded-lg"
                                >
                                    <img
                                        src={`/storage/${reply.user.image}`}
                                        alt=""
                                        className="w-12 h-12 object-cover rounded-full"
                                    />
                                    <div>
                                        <p>{reply.user.name}</p>
                                        <p>{reply.body}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div>
                            <button
                                className="flex items-center justify-center w-10 h-10 rounded-full hover:bg-white hover:bg-opacity-10 cursor-pointer"
                                onClick={() => dropdowncomment(comment.id)}
                            >
                                <svg
                                    width="18"
                                    height="18"
                                    viewBox="0 0 68 17"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        fillRule="evenodd"
                                        clipRule="evenodd"
                                        d="M8.94595 16.9279C13.5384 16.9279 17.2613 13.205 17.2613 8.61263C17.2613 4.0202 13.5384 0.29731 8.94595 0.29731C4.35352 0.29731 0.63063 4.0202 0.63063 8.61263C0.63063 13.205 4.35352 16.9279 8.94595 16.9279ZM42.2072 8.61263C42.2072 13.205 38.4843 16.9279 33.8919 16.9279C29.2995 16.9279 25.5766 13.205 25.5766 8.61263C25.5766 4.0202 29.2995 0.29731 33.8919 0.29731C38.4843 0.29731 42.2072 4.0202 42.2072 8.61263ZM67.1532 8.61263C67.1532 13.205 63.4303 16.9279 58.8378 16.9279C54.2454 16.9279 50.5225 13.205 50.5225 8.61263C50.5225 4.0202 54.2454 0.29731 58.8378 0.29731C63.4303 0.29731 67.1532 4.0202 67.1532 8.61263Z"
                                        fill="white"
                                    />
                                </svg>
                            </button>
                            <div
                                className="absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md overflow-hidden hidden"
                                id={`dropdown-comment-${comment.id}`}
                            >
                                <button
                                    href="#"
                                    className="flex w-full gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                >
                                    <svg
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            d="M19 2H6.27001C5.5682 2.00023 4.88868 2.24651 4.34969 2.69598C3.81069 3.14544 3.44633 3.76965 3.32001 4.46L2.05001 11.46C1.97088 11.8924 1.98775 12.337 2.09944 12.7622C2.21113 13.1874 2.41491 13.5828 2.69634 13.9206C2.97778 14.2583 3.33 14.53 3.72809 14.7166C4.12617 14.9031 4.56039 14.9999 5.00001 15H9.56001L9.00001 16.43C8.76707 17.0561 8.6895 17.7294 8.77394 18.3921C8.85838 19.0548 9.10232 19.6871 9.48482 20.2348C9.86732 20.7825 10.377 21.2292 10.9701 21.5367C11.5632 21.8441 12.222 22.0031 12.89 22C13.0824 21.9996 13.2705 21.9437 13.4319 21.8391C13.5933 21.7344 13.7211 21.5854 13.8 21.41L16.65 15H19C19.7957 15 20.5587 14.6839 21.1213 14.1213C21.6839 13.5587 22 12.7956 22 12V5C22 4.20435 21.6839 3.44129 21.1213 2.87868C20.5587 2.31607 19.7957 2 19 2ZM15 13.79L12.28 19.91C12.0017 19.8258 11.7436 19.6855 11.5215 19.4978C11.2995 19.31 11.1183 19.0788 10.989 18.8183C10.8597 18.5579 10.7851 18.2737 10.7698 17.9834C10.7545 17.693 10.7988 17.4026 10.9 17.13L11.43 15.7C11.5429 15.3977 11.5811 15.0727 11.5411 14.7525C11.5012 14.4323 11.3844 14.1265 11.2007 13.8613C11.017 13.596 10.7718 13.3791 10.4861 13.2292C10.2004 13.0792 9.88267 13.0006 9.56001 13H5.00001C4.8531 13.0002 4.70794 12.9681 4.57485 12.9059C4.44177 12.8437 4.32403 12.7529 4.23001 12.64C4.13367 12.5287 4.06311 12.3975 4.02335 12.2557C3.98359 12.114 3.97562 11.9652 4.00001 11.82L5.27001 4.82C5.3126 4.58704 5.43649 4.37676 5.61962 4.2266C5.80274 4.07644 6.03322 3.99614 6.27001 4H15V13.79ZM20 12C20 12.2652 19.8947 12.5196 19.7071 12.7071C19.5196 12.8946 19.2652 13 19 13H17V4H19C19.2652 4 19.5196 4.10536 19.7071 4.29289C19.8947 4.48043 20 4.73478 20 5V12Z"
                                            fill="#FF0000"
                                        />
                                    </svg>
                                    Not Interest
                                </button>
                                <button
                                    href="#"
                                    className="flex w-full gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                >
                                    <svg
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <path
                                            d="M19.9912 2.00201C19.8599 2.00194 19.7298 2.02775 19.6084 2.07798C19.4871 2.12821 19.3768 2.20187 19.2839 2.29474C19.1911 2.38761 19.1174 2.49788 19.0672 2.61924C19.017 2.7406 18.9911 2.87067 18.9912 3.00201V3.63873C18.1478 4.68444 17.0819 5.52893 15.871 6.11073C14.66 6.69254 13.3346 6.99702 11.9912 7.00201H5.99121C5.19583 7.00288 4.43327 7.31923 3.87085 7.88165C3.30843 8.44407 2.99208 9.20663 2.99121 10.002V12.002C2.99208 12.7974 3.30843 13.56 3.87085 14.1224C4.43327 14.6848 5.19583 15.0011 5.99121 15.002H6.475L4.07227 20.6084C4.00698 20.7605 3.98047 20.9264 3.99512 21.0912C4.00978 21.256 4.06514 21.4147 4.15624 21.5528C4.24734 21.691 4.37133 21.8043 4.51706 21.8827C4.6628 21.9611 4.82572 22.0021 4.99121 22.002H8.99121C9.18696 22.0021 9.37843 21.9447 9.54182 21.8369C9.7052 21.7291 9.83329 21.5756 9.91016 21.3956L12.6339 15.04C13.8646 15.1304 15.0636 15.472 16.157 16.0439C17.2505 16.6158 18.215 17.4058 18.9912 18.3651V19.002C18.9912 19.2672 19.0966 19.5216 19.2841 19.7091C19.4716 19.8967 19.726 20.002 19.9912 20.002C20.2564 20.002 20.5108 19.8967 20.6983 19.7091C20.8859 19.5216 20.9912 19.2672 20.9912 19.002V3.00201C20.9913 2.87067 20.9655 2.7406 20.9152 2.61924C20.865 2.49788 20.7914 2.38761 20.6985 2.29474C20.6056 2.20186 20.4953 2.12821 20.374 2.07798C20.2526 2.02775 20.1226 2.00194 19.9912 2.00201ZM5.99121 13.002C5.72605 13.0018 5.4718 12.8964 5.2843 12.7089C5.0968 12.5214 4.99139 12.2672 4.99121 12.002V10.002C4.99139 9.73685 5.09681 9.4826 5.2843 9.29511C5.4718 9.10761 5.72605 9.00219 5.99121 9.00201H6.99121V13.002H5.99121ZM8.33203 20.002H6.50781L8.65039 15.002H10.4746L8.33203 20.002ZM18.9912 15.5238C17.0195 13.8994 14.5459 13.0083 11.9912 13.002H8.99121V9.00196H11.9912C14.5459 8.99543 17.0195 8.10412 18.9912 6.47962V15.5238Z"
                                            fill="#FF0000"
                                        />
                                    </svg>
                                    Report
                                </button>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
}
